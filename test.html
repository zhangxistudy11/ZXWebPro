<!DOCTYPE html>
<html>
<head>
  <title>文本匹配器</title>
  <meta charset="UTF-8">
  <style>
    #input-text {
      width: 300px;
      height: 100px;
    }
    
    #filter-input {
      margin-top: 10px;
    }
    
    #filter-btn {
      margin-top: 10px;
    }
    
    #output-text {
      width: 300px;
      margin-top: 10px;
      padding: 5px;
      white-space: pre-wrap; /* 保留换行格式 */
    }
    
    .highlight {
      background-color: yellow;
      font-weight: bold;
    }
  </style>
</head>
<body>
  <h1>文本匹配器</h1>
  
  <textarea id="input-text" placeholder="在此处输入文本..."></textarea>
  
  <input type="text" id="filter-input" placeholder="在此处输入匹配规则...">
  
  <button id="filter-btn">匹配</button>
  
  <h2>匹配结果:</h2>
  <pre id="output-text"></pre>
  
  <script>
    const filterButton = document.getElementById('filter-btn');
    const inputText = document.getElementById('input-text');
    const filterInput = document.getElementById('filter-input');
    const outputText = document.getElementById('output-text');
    
    filterButton.addEventListener('click', function() {
      const searchText = inputText.value.trim();
      const filterRule = filterInput.value.trim();
      
      console.log('Search Text:', searchText);
      console.log('Filter Rule:', filterRule);
      
      const filterOptions = filterRule.split('|'); // 使用竖线分割多个规则
      
      const patterns = filterOptions.map(rule => new RegExp(rule, 'gi')); // 根据每个规则创建正则表达式
      
      let highlightedText = searchText;
      
      patterns.forEach(pattern => {
        const matches = highlightedText.match(pattern);
        console.log('Matches:', matches);
        
        if (matches) {
          highlightedText = highlightedText.replace(pattern, '<span class="highlight">$&</span>');
        }
      });
      
      outputText.innerHTML = highlightedText;
    });
  </script>
</body>
</html>
